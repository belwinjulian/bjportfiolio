---
phase: 04-polish-performance
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - components/AnimatedSection.tsx
  - components/Projects.tsx
  - components/About.tsx
  - components/Resume.tsx
  - components/Footer.tsx
  - app/page.tsx
  - app/globals.css
autonomous: true

must_haves:
  truths:
    - "About section fades in from below when scrolled into view"
    - "Projects section heading fades in, then project cards stagger in one by one"
    - "Resume section fades in from below when scrolled into view"
    - "Footer fades in from below when scrolled into view"
    - "Animations play only once per section (not on re-scroll)"
    - "Users with prefers-reduced-motion see content instantly with no animation"
  artifacts:
    - path: "components/AnimatedSection.tsx"
      provides: "Reusable scroll-triggered fade-in wrapper using Intersection Observer"
      contains: "useInView"
    - path: "app/globals.css"
      provides: "Custom fadeInUp keyframes and animation utilities"
      contains: "fadeInUp"
  key_links:
    - from: "components/AnimatedSection.tsx"
      to: "react-intersection-observer"
      via: "useInView hook import"
      pattern: "useInView.*react-intersection-observer"
    - from: "app/page.tsx"
      to: "components/AnimatedSection.tsx"
      via: "AnimatedSection wrapping section components or sections using it internally"
      pattern: "AnimatedSection"
---

<objective>
Add scroll-triggered fade-in animations to all page sections using Intersection Observer, with staggered animation on project cards.

Purpose: Sections currently appear statically on the page. Adding scroll-triggered fade-in animations creates a polished, professional feel as the user scrolls — matching the craftz.dog inspiration. This addresses PLSH-01 (fade-in animations) and PLSH-04 (reduced motion respect via existing CSS).

Output: AnimatedSection component, updated section components with scroll animations, staggered project cards.
</objective>

<execution_context>
@/Users/belwinjulian/.claude/get-shit-done/workflows/execute-plan.md
@/Users/belwinjulian/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-polish-performance/04-RESEARCH.md

@app/globals.css
@components/Projects.tsx
@components/About.tsx
@components/Resume.tsx
@components/Footer.tsx
@app/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-intersection-observer and create AnimatedSection component</name>
  <files>components/AnimatedSection.tsx, app/globals.css</files>
  <action>
1. Install react-intersection-observer:
   ```bash
   npm install react-intersection-observer
   ```

2. Create `components/AnimatedSection.tsx` — a reusable 'use client' wrapper component:
   - Import `useInView` from `react-intersection-observer`
   - Props: `children: ReactNode`, `className?: string`, `delay?: number` (default 0, in ms)
   - Use `useInView({ threshold: 0.1, triggerOnce: true })` to detect when 10% of element is visible
   - Render a `<div>` with ref from useInView
   - Apply Tailwind transition classes: `transition-all duration-700 ease-out`
   - When `inView`: `opacity-100 translate-y-0`
   - When not `inView`: `opacity-0 translate-y-8`
   - Apply `delay` via inline `style={{ transitionDelay: '${delay}ms' }}` — only when NOT yet in view, set delay to '0ms' (so elements don't remain invisible with lingering delays once animated in)
   - Pass through `className` for additional styling

3. Add custom keyframes to `app/globals.css` BEFORE the existing `@media (prefers-reduced-motion)` block:
   ```css
   @keyframes fadeInUp {
     from {
       opacity: 0;
       transform: translateY(2rem);
     }
     to {
       opacity: 1;
       transform: translateY(0);
     }
   }
   ```
   These keyframes are available as fallback utilities. The AnimatedSection component primarily uses Tailwind transition classes, but the keyframes provide `.animate-fade-in-up` for elements needing CSS animation instead of transition.

   Also add a utility class below the keyframes:
   ```css
   .animate-fade-in-up {
     animation: fadeInUp 0.7s ease-out forwards;
   }
   ```

   The existing `prefers-reduced-motion` media query already handles overriding `animation-duration` and `transition-duration` to 0.01ms, so no additional reduced-motion work is needed.
  </action>
  <verify>
   - `npm ls react-intersection-observer` shows installed version
   - `components/AnimatedSection.tsx` exists with 'use client' directive, useInView import, threshold 0.1, triggerOnce true
   - `app/globals.css` contains @keyframes fadeInUp and .animate-fade-in-up utility
   - `npm run build` succeeds with no errors
  </verify>
  <done>AnimatedSection component renders a div that starts invisible (opacity-0, translate-y-8) and transitions to visible (opacity-100, translate-y-0) when 10% enters viewport, with configurable delay. Custom fadeInUp keyframes available in globals.css. Build passes.</done>
</task>

<task type="auto">
  <name>Task 2: Wrap page sections with AnimatedSection and add staggered project cards</name>
  <files>components/About.tsx, components/Resume.tsx, components/Footer.tsx, components/Projects.tsx, app/page.tsx</files>
  <action>
1. Update `components/About.tsx`:
   - Add 'use client' directive at top (needed because it will now use AnimatedSection which is a client component, OR wrap content in AnimatedSection from parent — see approach below)
   - Import AnimatedSection from '@/components/AnimatedSection'
   - Wrap the inner content (the h2 + grid) inside an `<AnimatedSection>` tag, keeping the outer `<section>` tag with its id="about" and existing classes intact
   - The section tag itself stays static (so scroll-mt-20 and id anchoring work). Only the visual content inside animates.

2. Update `components/Resume.tsx`:
   - Same pattern as About: add 'use client', import AnimatedSection
   - Wrap inner content (h2 + download button + resume content) inside `<AnimatedSection>` within the existing section tag

3. Update `components/Footer.tsx`:
   - Same pattern: add 'use client', import AnimatedSection
   - Wrap the inner div (copyright + social links container) in `<AnimatedSection>`

4. Update `components/Projects.tsx`:
   - Already no 'use client' — but it needs to become a client component now for animations
   - Add 'use client' directive
   - Import `useInView` from 'react-intersection-observer' and AnimatedSection
   - Use `useInView({ threshold: 0.1, triggerOnce: true })` at section level to detect when Projects enters viewport
   - Wrap the heading ("Projects" h2 + description p) in an AnimatedSection
   - For the project cards grid: wrap each `<ProjectCard>` in an `<AnimatedSection>` with staggered delay: `delay={index * 100}` (100ms stagger between each card)
   - This creates a cascading reveal effect where cards appear one after another

5. Do NOT add AnimatedSection to Hero — Hero is above the fold and should appear immediately (per research recommendation for LCP optimization). Hero entrance animation (if any) will be handled in plan 04-02.

6. Verify `app/page.tsx` does NOT need changes — sections handle their own animations internally.
  </action>
  <verify>
   - `npm run build` succeeds with no errors
   - Each section component (About, Resume, Footer, Projects) imports and uses AnimatedSection
   - Projects.tsx uses staggered delays on individual project cards (delay prop with index * 100)
   - Hero.tsx remains unchanged (no scroll animation on above-fold content)
   - No TypeScript errors in any modified file
  </verify>
  <done>About, Projects, Resume, and Footer sections fade in when scrolled into view. Project cards stagger in with 100ms delay between each. Hero remains immediately visible. All animations respect prefers-reduced-motion via existing CSS. Build passes cleanly.</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `npm run dev` — scroll down the page:
   - About section fades in from below as it enters viewport
   - Projects heading fades in, then cards stagger in sequentially
   - Resume section fades in from below
   - Footer fades in from below
   - Hero is visible immediately without animation
3. Scroll back up and down — animations do NOT replay (triggerOnce: true)
4. In Chrome DevTools, toggle prefers-reduced-motion — all transitions become instant (0.01ms)
</verification>

<success_criteria>
- AnimatedSection component exists and works with Intersection Observer
- All below-fold sections (About, Projects, Resume, Footer) fade in on scroll
- Project cards have staggered animation (100ms between each)
- Hero section has NO scroll animation (appears immediately)
- Animations play only once per section
- prefers-reduced-motion users see instant content (no animation)
- Production build succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-polish-performance/04-01-SUMMARY.md`
</output>
